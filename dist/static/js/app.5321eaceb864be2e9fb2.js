webpackJsonp([1],{NHnr:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=s("7+uW"),e={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"app"}},[s("nav",{staticClass:"navbar navbar-light bg-light"},[s("a",{staticClass:"navbar-brand"},[t._v("購物網")]),t._v(" "),s("div",{staticClass:"dropdown "},[s("button",{staticClass:"btn btn-cart bg-dark",attrs:{type:"button","data-toggle":"dropdown"}},[s("i",{staticClass:"fas fa-shopping-cart"}),t._v(" "),s("span",{staticClass:"badge badge-pill badge-danger"},[t._v(t._s(t.cart.carts.length))])]),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right",staticStyle:{width:"300px"}},[s("h4",{staticClass:"h4"},[t._v("已選購商品")]),t._v(" "),s("table",{staticClass:"table"},[t._l(t.cart.carts,function(a){return s("tbody",{key:a.id},[s("tr",[s("td",[s("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(s){return t.removeCart(a.id)}}},[s("i",{staticClass:"far fa-trash-alt"})])]),t._v(" "),s("td",[t._v(t._s(a.product.title))]),t._v(" "),s("td",[t._v(t._s(a.qty)+"/"+t._s(a.product.unit)+" ")]),t._v(" "),s("td",[t._v(t._s(t.cart.total)+" ")])])])}),t._v(" "),t._m(0)],2)])])]),t._v(" "),t._m(1),t._v(" "),s("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),s("router-view"),t._v(" "),t._m(2)],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("tfoot",[a("tr",[a("td",{attrs:{colspan:"4"}},[a("button",{staticClass:"btn btn-outline-primary",staticStyle:{width:"100%"},attrs:{type:"button"}},[a("i",{staticClass:"fas fa-box-open"}),this._v("結帳去")])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"jumbotron jumbotron-fluid"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row d-flex justify-content-center align-items-center"},[a("div",{staticClass:"col-10",staticStyle:{"background-color":"rgba(250,250,250,0.5)",height:"200px"}},[a("h3",{staticClass:"font-weight-bolder p-3"},[this._v("周年慶,特賣會")]),this._v(" "),a("span",{staticClass:"lead"})])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("footer",{staticClass:"mt-5"},[a("div",{staticClass:"list-inline text-center"},[a("span",{staticClass:"list-inline-item"},[this._v("©2020")]),this._v(" "),a("span",{staticClass:"list-inline-item text-info"},[this._v("instagram")]),this._v(" "),a("span",{staticClass:"list-inline-item text-info"},[this._v("facebook")]),this._v(" "),a("div",[this._v("用bootstrap4製作")])])])}]};var n=s("VU/8")({name:"App",data:function(){return{}},methods:{getcart:function(){this.$store.dispatch("getCart")},removeCart:function(t){this.$store.dispatch("removeCart",t)}},computed:{isLoading:function(){return this.$store.state.isLoading},cart:function(){return this.$store.state.cart}},created:function(){this.getcart()}},e,!1,function(t){s("dp7A")},null,null).exports,o=s("/ocq"),c={name:"App",data:function(){return{searchText:""}},methods:{getProducts:function(){this.$store.dispatch("getProducts")},addtoCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("addtoCart",{id:t,qty:a})}},computed:{isLoading:function(){return this.$store.state.isLoading},products:function(){return this.$store.state.products},categories:function(){return this.$store.state.categories},filterData:function(){var t=this;return t.searchText?t.products.filter(function(a){return a.title.toLowerCase().includes(t.searchText.toLowerCase())}):this.products}},created:function(){this.getProducts()}},r={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-3"},[s("div",{staticClass:"list-group"},[t._l(t.categories,function(a){return s("div",{key:a,staticClass:"list-group-item",class:{active:a===t.searchText},on:{click:function(s){t.searchText=a}}},[s("i",{staticClass:"fa fa-street-view"}),t._v(t._s(a)+"\n                                ")])}),t._v(" "),s("div",{staticClass:"list-group-item",class:{active:""===t.searchText},on:{click:function(a){t.searchText=""}}},[s("i",{staticClass:"fa fa-street-view"}),t._v("全部顯示")])],2)]),t._v(" "),s("div",{staticClass:"col-9"},[s("div",{staticClass:"row d-flex align-items-center"},[s("div",{staticClass:"col-4"},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"form-control",attrs:{type:"text",placeholder:"搜尋"},domProps:{value:t.searchText},on:{input:function(a){a.target.composing||(t.searchText=a.target.value)}}}),t._v(" "),s("button",{staticClass:"input-group-append  btn btn-outline-success",attrs:{type:"button"},on:{click:function(a){t.searchText=""}}},[t._v("×")])])]),t._v(" "),s("div",{staticClass:"col-8"},[s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-outline-primary",staticStyle:{height:"3rem"},attrs:{type:"button"},on:{click:function(a){return t.getProducts()}}},[t._v("重新取得資料")])])])]),t._v(" "),s("div",{staticClass:"row mt-3"},t._l(t.filterData,function(a){return s("div",{key:a.id,staticClass:"col-sm-4",staticStyle:{height:"350px"}},[s("img",{staticStyle:{width:"100%",height:"150px"},attrs:{src:a.imageUrl,alt:"image"}}),t._v(" "),s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"card-title text-center h4"},[t._v(t._s(a.title))]),t._v(" "),s("div",{staticClass:"card-text"},[t._v(t._s(a.content))])]),t._v(" "),s("div",{staticClass:"card-footer"},[s("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(s){return t.addtoCart(a.id)}}},[s("i",{staticClass:"fas fa-box-open"}),t._v(" 加入購物車")])])])])}),0)])])])])},staticRenderFns:[]},l=s("VU/8")(c,r,!1,null,null,null).exports;i.a.use(o.a);var u=new o.a({routes:[{path:"/",name:"Home",component:l}]}),d=(s("K3J8"),s("mtWM")),v=s.n(d),p=s("c/Tr"),h=s.n(p),f=s("lHA8"),m=s.n(f),g=s("NYxO");i.a.use(g.a);var C=new g.a.Store({state:{isLoading:!1,products:[],categories:[],cart:{carts:[]}},actions:{updateLoading:function(t,a){t.commit("LOADING",a)},getProducts:function(t,a){t.commit("LOADING",!0);v.a.get("https://vue-course-api.hexschool.io/api/sunday2/products/all").then(function(a){t.commit("LOADING",!1),t.commit("PRODUCTS",a.data.products),t.commit("CATEGORIES",a.data.products),console.log("商品列表",a)})},getCart:function(t,a){t.commit("LOADING",!0);v.a.get("https://vue-course-api.hexschool.io/api/sunday2/cart").then(function(a){t.commit("LOADING",!1),t.commit("CART",a.data.data),console.log("取得購物車列表",a)})},addtoCart:function(t,a){var s=a.id,i=a.qty;t.commit("LOADING",!0);var e={product_id:s,qty:i};v.a.post("https://vue-course-api.hexschool.io/api/sunday2/cart",{data:e}).then(function(a){t.commit("LOADING",!1),t.dispatch("getCart"),console.log("已加入購物車",a.data)})},removeCart:function(t,a){t.commit("LOADING",!0);var s="https://vue-course-api.hexschool.io/api/sunday2/cart/"+a;v.a.delete(s).then(function(a){t.commit("LOADING",!1),console.log("已刪除此筆資料",a.data),t.dispatch("getCart")})}},mutations:{LOADING:function(t,a){t.isLoading=a},PRODUCTS:function(t,a){t.products=a},CATEGORIES:function(t,a){var s=new m.a;a.forEach(function(t){s.add(t.category)}),t.categories=h()(s)},CART:function(t,a){t.cart=a}},getters:{}}),_=s("Rf8U"),b=s.n(_),x=s("ZZvs"),y=s.n(x);s("SYh3");v.a.defaults.withCredentials=!0,i.a.config.productionTip=!1,i.a.component("Loading",y.a),i.a.use(b.a,v.a),i.a.use(g.a),new i.a({el:"#app",router:u,store:C,components:{App:n},template:"<App/>"})},SYh3:function(t,a){},dp7A:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.5321eaceb864be2e9fb2.js.map